<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>êµ°ëŒ€ D-DAY ê³„ì‚°ê¸°</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f4f6fb;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      background: #ffffff;
      padding: 24px 28px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      max-width: 420px;
      width: 100%;
      box-sizing: border-box;
      text-align: center;
    }

    h1 {
      margin-top: 0;
      margin-bottom: 4px;
      font-size: 24px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 20px;
      font-size: 13px;
    }

    .field {
      margin-bottom: 16px;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      font-weight: 600;
    }

    input[type="date"],
    input[type="text"] {
      width: 100%;
      box-sizing: border-box;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ccd1e4;
      font-size: 14px;
    }

    button {
      margin-top: 8px;
      width: 100%;
      padding: 10px 0;
      border-radius: 10px;
      border: none;
      background: #2f66ff;
      color: white;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
    }

    button:hover {
      background: #214ee0;
    }

    .today {
      font-size: 13px;
      color: #777;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .result {
      margin-top: 18px;
      padding: 14px 12px;
      border-radius: 12px;
      background: #f0f3ff;
      font-size: 18px;
      font-weight: 700;
    }

    .result-sub {
      margin-top: 6px;
      font-size: 13px;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>êµ°ëŒ€ D-DAY</h1>
    <div class="subtitle">ì…ëŒ€ ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ D-DAYë¥¼ ê³„ì‚°í•´ì¤˜ìš”</div>

    <div class="today" id="todayText"></div>

    <div class="field">
      <label for="eventName">ì´ë¦„ / ë©”ëª¨ (ì„ íƒ)</label>
      <input type="text" id="eventName" placeholder="ì˜ˆ) í˜„ì—­ ì…ëŒ€, ê³µêµ° ì…ëŒ€ ë“±" />
    </div>

    <div class="field">
      <label for="targetDate">ì…ëŒ€ ë‚ ì§œ</label>
      <input type="date" id="targetDate" />
    </div>

    <button id="calcBtn">D-DAY ê³„ì‚°í•˜ê¸°</button>

    <div class="result" id="resultBox">ì•„ì§ D-DAYë¥¼ ê³„ì‚°í•˜ì§€ ì•Šì•˜ì–´ìš”.</div>
    <div class="result-sub" id="resultDetail"></div>
  </div>

  <script>
    // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ "YYYY-MM-DD" í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
    function formatDate(date) {
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, "0");
      const d = String(date.getDate()).padStart(2, "0");
      return `${y}-${m}-${d}`;
    }

    function updateToday() {
      const today = new Date();
      document.getElementById("todayText").innerText =
        "ì˜¤ëŠ˜ ë‚ ì§œ : " + formatDate(today);
    }

    // D-day ê³„ì‚° í•¨ìˆ˜
    function calcDday() {
      const eventNameInput = document.getElementById("eventName");
      const targetDateInput = document.getElementById("targetDate");
      const resultBox = document.getElementById("resultBox");
      const resultDetail = document.getElementById("resultDetail");

      const eventName = eventNameInput.value.trim();
      const targetValue = targetDateInput.value;

      if (!targetValue) {
        alert("ì…ëŒ€ ë‚ ì§œë¥¼ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”!");
        return;
      }

      // ì˜¤ëŠ˜ 00:00, ëª©í‘œì¼ 00:00 ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚° (ì‹œê°„ ì˜í–¥ ì œê±°)
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      const target = new Date(targetValue);
      target.setHours(0, 0, 0, 0);

      const diffMs = target.getTime() - today.getTime(); // ë°€ë¦¬ì´ˆ ì°¨ì´
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

      let mainText = "";
      let detailText = "";

      const title = eventName ? eventName : "ì…ëŒ€";

      if (diffDays > 0) {
        mainText = `${title}ê¹Œì§€ D-${diffDays}`;
        detailText = `ì˜¤ëŠ˜ ê¸°ì¤€ìœ¼ë¡œ ${diffDays}ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤.`;
      } else if (diffDays === 0) {
        mainText = `${title} D-DAY`;
        detailText = "ì˜¤ëŠ˜ì´ ì…ëŒ€ì¼ì…ë‹ˆë‹¤. íŒŒì´íŒ… ğŸ’ª";
      } else {
        const passed = Math.abs(diffDays);
        mainText = `${title} D+${passed}`;
        detailText = `ì…ëŒ€í•œ ì§€ ${passed}ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤.`;
      }

      resultBox.innerText = mainText;
      resultDetail.innerText = detailText;
    }

    // ìµœì´ˆ ë¡œë”© ì‹œ ì˜¤ëŠ˜ ë‚ ì§œ ì„¸íŒ…
    updateToday();

    // ë²„íŠ¼ í´ë¦­ ì‹œ D-day ê³„ì‚°
    document.getElementById("calcBtn").addEventListener("click", calcDday);
  </script>
</body>
</html>
